"use strict";
var Nodemailer = require("nodemailer");
module.exports = (function () {
    function DenialMail(from, password, to, fromname) {
        this.from = from;
        this.to = from;
        if (fromname)
            this.name = fromname;
        this.transporter = Nodemailer.createTransport("smtps://" + from.split("@")[0] + "%40gmail.com:" + password + "@smtp.gmail.com");
    }
    DenialMail.prototype.send = function () {
        return new Promise(function (resolve, reject) {
            var mailOptions = {
                from: '"' + this.name + '" <' + this.from + '>',
                to: this.to,
                subject: "subject",
                text: "text",
                html: "html"
            };
            this.transporter.sendMail(mailOptions, function (error, info) {
                if (error) {
                    reject(error);
                }
                else {
                    resolve(info);
                }
            });
        });
    };
    return DenialMail;
}());

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQSxJQUFPLFVBQVUsV0FBVyxZQUFZLENBQUMsQ0FBQztBQWExQyxpQkFBUztJQU9MLG9CQUFZLElBQVksRUFBRSxRQUFnQixFQUFFLEVBQVUsRUFBRSxRQUFpQjtRQUVyRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQztRQUVmLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO1FBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUcsUUFBUSxHQUFHLGlCQUFpQixDQUFDLENBQUM7SUFDcEksQ0FBQztJQUVELHlCQUFJLEdBQUo7UUFDSSxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsVUFBUyxPQUFPLEVBQUUsTUFBTTtZQUd2QyxJQUFJLFdBQVcsR0FBVTtnQkFDckIsSUFBSSxFQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUc7Z0JBQy9DLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDWCxPQUFPLEVBQUUsU0FBUztnQkFDbEIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osSUFBSSxFQUFFLE1BQU07YUFDZixDQUFDO1lBSUYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFVBQVMsS0FBSyxFQUFFLElBQUk7Z0JBQ3ZELEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ1IsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNsQixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNKLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEIsQ0FBQztZQUdMLENBQUMsQ0FBQyxDQUFDO1FBRVAsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBQ0wsaUJBQUM7QUFBRCxDQTFDUyxBQTBDUixHQUFBLENBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCAqIGFzIGJsdWViaXJkIGZyb20gXCJibHVlYmlyZFwiO1xuXG5pbXBvcnQgTm9kZW1haWxlciA9IHJlcXVpcmUoXCJub2RlbWFpbGVyXCIpO1xuXG5pbnRlcmZhY2UgSW1haWwge1xuXG4gICAgZnJvbTogc3RyaW5nO1xuICAgIHRvOiBzdHJpbmc7IC8vIGxpc3Qgb2YgcmVjZWl2ZXJzIFxuICAgIHN1YmplY3Q6IHN0cmluZzsgLy8gU3ViamVjdCBsaW5lIFxuICAgIHRleHQ6IHN0cmluZztcbiAgICBodG1sOiBzdHJpbmc7XG5cbn1cblxuXG5leHBvcnQgPSBjbGFzcyBEZW5pYWxNYWlsIHtcblxuICAgIGZyb206IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdG86IHN0cmluZztcbiAgICB0cmFuc3BvcnRlcjogTm9kZW1haWxlci5UcmFuc3BvcnRlcjtcblxuICAgIGNvbnN0cnVjdG9yKGZyb206IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZywgdG86IHN0cmluZywgZnJvbW5hbWU/OiBzdHJpbmcpIHtcblxuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gZnJvbTtcblxuICAgICAgICBpZiAoZnJvbW5hbWUpIHRoaXMubmFtZSA9IGZyb21uYW1lO1xuICAgICAgICB0aGlzLnRyYW5zcG9ydGVyID0gTm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoXCJzbXRwczovL1wiICsgZnJvbS5zcGxpdChcIkBcIilbMF0gKyBcIiU0MGdtYWlsLmNvbTpcIiArIHBhc3N3b3JkICsgXCJAc210cC5nbWFpbC5jb21cIik7XG4gICAgfVxuXG4gICAgc2VuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXG5cbiAgICAgICAgICAgIGxldCBtYWlsT3B0aW9uczogSW1haWwgPSB7XG4gICAgICAgICAgICAgICAgZnJvbTogJ1wiJyArIHRoaXMubmFtZSArICdcIiA8JyArIHRoaXMuZnJvbSArICc+JywgLy8gc2VuZGVyIGFkZHJlc3MgXG4gICAgICAgICAgICAgICAgdG86IHRoaXMudG8sIC8vIGxpc3Qgb2YgcmVjZWl2ZXJzIFxuICAgICAgICAgICAgICAgIHN1YmplY3Q6IFwic3ViamVjdFwiLCAvLyBTdWJqZWN0IGxpbmUgXG4gICAgICAgICAgICAgICAgdGV4dDogXCJ0ZXh0XCIsIC8vIHBsYWludGV4dCBib2R5IFxuICAgICAgICAgICAgICAgIGh0bWw6IFwiaHRtbFwiIC8vIGh0bWwgYm9keSBcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgXG4gICAgICAgICAgICAvLyBzZW5kIG1haWwgd2l0aCBkZWZpbmVkIHRyYW5zcG9ydCBvYmplY3QgXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zLCBmdW5jdGlvbihlcnJvciwgaW5mbykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KVxuICAgIH1cbn0iXX0=
