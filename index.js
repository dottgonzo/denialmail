"use strict";
var Nodemailer = require("nodemailer");
module.exports = (function () {
    function DenialMail(from, password, to, fromname) {
        this.from = from;
        this.to = from;
        if (fromname)
            this.name = fromname;
        this.transporter = Nodemailer.createTransport("smtps://" + from.split("@")[0] + "%40gmail.com:" + password + "@smtp.gmail.com");
    }
    DenialMail.prototype.send = function (text) {
        return new Promise(function (resolve, reject) {
            var html = text;
            var mailOptions = {
                from: '"' + this.name + '" <' + this.from + '>',
                to: this.to,
                subject: "subject",
                text: html,
                html: html
            };
            this.transporter.sendMail(mailOptions, function (error, info) {
                if (error) {
                    reject(error);
                }
                else {
                    resolve(info);
                }
            });
        });
    };
    return DenialMail;
}());

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQSxJQUFPLFVBQVUsV0FBVyxZQUFZLENBQUMsQ0FBQztBQWExQyxpQkFBUztJQU9MLG9CQUFZLElBQVksRUFBRSxRQUFnQixFQUFFLEVBQVUsRUFBRSxRQUFpQjtRQUVyRSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQztRQUVmLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDO1FBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUcsUUFBUSxHQUFHLGlCQUFpQixDQUFDLENBQUM7SUFDcEksQ0FBQztJQUVELHlCQUFJLEdBQUosVUFBSyxJQUFZO1FBQ2IsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQVMsT0FBTyxFQUFFLE1BQU07WUFFdkMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFBO1lBRWYsSUFBSSxXQUFXLEdBQVU7Z0JBQ3JCLElBQUksRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHO2dCQUMvQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7Z0JBQ1gsT0FBTyxFQUFFLFNBQVM7Z0JBQ2xCLElBQUksRUFBRSxJQUFJO2dCQUNWLElBQUksRUFBRSxJQUFJO2FBQ2IsQ0FBQztZQUlGLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxVQUFTLEtBQUssRUFBRSxJQUFJO2dCQUN2RCxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUNSLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbEIsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDSixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2xCLENBQUM7WUFHTCxDQUFDLENBQUMsQ0FBQztRQUVQLENBQUMsQ0FBQyxDQUFBO0lBQ04sQ0FBQztJQUNMLGlCQUFDO0FBQUQsQ0EzQ1MsQUEyQ1IsR0FBQSxDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgKiBhcyBibHVlYmlyZCBmcm9tIFwiYmx1ZWJpcmRcIjtcblxuaW1wb3J0IE5vZGVtYWlsZXIgPSByZXF1aXJlKFwibm9kZW1haWxlclwiKTtcblxuaW50ZXJmYWNlIEltYWlsIHtcblxuICAgIGZyb206IHN0cmluZztcbiAgICB0bzogc3RyaW5nOyAvLyBsaXN0IG9mIHJlY2VpdmVycyBcbiAgICBzdWJqZWN0OiBzdHJpbmc7IC8vIFN1YmplY3QgbGluZSBcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgaHRtbDogc3RyaW5nO1xuXG59XG5cblxuZXhwb3J0ID0gY2xhc3MgRGVuaWFsTWFpbCB7XG5cbiAgICBmcm9tOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHRvOiBzdHJpbmc7XG4gICAgdHJhbnNwb3J0ZXI6IE5vZGVtYWlsZXIuVHJhbnNwb3J0ZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihmcm9tOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHRvOiBzdHJpbmcsIGZyb21uYW1lPzogc3RyaW5nKSB7XG5cbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IGZyb207XG5cbiAgICAgICAgaWYgKGZyb21uYW1lKSB0aGlzLm5hbWUgPSBmcm9tbmFtZTtcbiAgICAgICAgdGhpcy50cmFuc3BvcnRlciA9IE5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KFwic210cHM6Ly9cIiArIGZyb20uc3BsaXQoXCJAXCIpWzBdICsgXCIlNDBnbWFpbC5jb206XCIgKyBwYXNzd29yZCArIFwiQHNtdHAuZ21haWwuY29tXCIpO1xuICAgIH1cblxuICAgIHNlbmQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICAgICAgbGV0IGh0bWwgPSB0ZXh0XG5cbiAgICAgICAgICAgIGxldCBtYWlsT3B0aW9uczogSW1haWwgPSB7XG4gICAgICAgICAgICAgICAgZnJvbTogJ1wiJyArIHRoaXMubmFtZSArICdcIiA8JyArIHRoaXMuZnJvbSArICc+JywgLy8gc2VuZGVyIGFkZHJlc3MgXG4gICAgICAgICAgICAgICAgdG86IHRoaXMudG8sIC8vIGxpc3Qgb2YgcmVjZWl2ZXJzIFxuICAgICAgICAgICAgICAgIHN1YmplY3Q6IFwic3ViamVjdFwiLCAvLyBTdWJqZWN0IGxpbmUgXG4gICAgICAgICAgICAgICAgdGV4dDogaHRtbCwgLy8gcGxhaW50ZXh0IGJvZHkgXG4gICAgICAgICAgICAgICAgaHRtbDogaHRtbCAvLyBodG1sIGJvZHkgXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIFxuICAgICAgICAgICAgLy8gc2VuZCBtYWlsIHdpdGggZGVmaW5lZCB0cmFuc3BvcnQgb2JqZWN0IFxuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucywgZnVuY3Rpb24oZXJyb3IsIGluZm8pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGluZm8pO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KVxuICAgIH1cbn0iXX0=
